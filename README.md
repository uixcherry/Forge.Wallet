# Forge.Wallet

Плагин для передачи опыта между игроками в Unturned с использованием RocketMod.

![version](https://img.shields.io/badge/версия-1.0.0-blue.svg)
![rocket](https://img.shields.io/badge/Rocket-4.9.3.0-blue.svg)
![unturned](https://img.shields.io/badge/Unturned-3.25.1.0-green.svg)

## Описание

Forge.Wallet - это плагин для Unturned/RocketMod, который позволяет игрокам передавать опыт друг другу с помощью специального предмета-кошелька или через команды. Плагин предоставляет удобный интерфейс и систему защиты от спама.

## Особенности

- ✅ Передача опыта между игроками с использованием предмета-кошелька
- ✅ Ограничение максимальной и минимальной суммы передачи
- ✅ Защита от спама с настраиваемым временем ожидания между передачами
- ✅ Система разрешений для контроля доступа
- ✅ Детальное логирование всех транзакций
- ✅ Интеграция с UI через Effects

## Установка

1. Скачайте последнюю версию плагина из раздела [Releases](ссылка_на_релизы)
2. Распакуйте архив и поместите `Forge.Wallet.dll` в папку `Rocket/Plugins` вашего сервера
3. Настройте конфигурационный файл, который появится в `Rocket/Plugins/Forge.Wallet`
4. Перезапустите сервер или используйте команду `/reload`

## Настройка

После первого запуска сервера с плагином будет создан файл конфигурации `Forge.Wallet.configuration.xml` в папке `Rocket/Plugins/Forge.Wallet/`.

```xml
<?xml version="1.0" encoding="utf-8"?>
<Configuration xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <EffectID>6654</EffectID>
  <EffectKey>6654</EffectKey>
  <WalletItemID>15</WalletItemID>
  <MinTransferAmount>10</MinTransferAmount>
  <MaxTransferAmount>1000</MaxTransferAmount>
  <CooldownSeconds>60</CooldownSeconds>
</Configuration>
```

### Описание параметров

| Параметр | Описание | Значение по умолчанию |
|----------|----------|------------------------|
| `EffectID` | ID эффекта для отображения UI кошелька | 6654 |
| `EffectKey` | Ключ эффекта для UI | 6654 |
| `WalletItemID` | ID предмета-кошелька | 15 |
| `MinTransferAmount` | Минимальная сумма для передачи | 10 |
| `MaxTransferAmount` | Максимальная сумма для передачи | 1000 |
| `CooldownSeconds` | Время ожидания между передачами (в секундах) | 60 |

> **Примечание:** Для использования плагина вам необходимо создать UI эффект с соответствующим ID. Инструкция по созданию UI эффекта будет добавлена позднее.

## Разрешения

| Разрешение | Описание |
|------------|----------|
| `forge.wallet` | Общее разрешение на использование кошелька |
| `forge.wallet.use` | Разрешение на использование кошелька (альтернативное) |

## Использование

### Передача опыта

1. Получите предмет-кошелек (ID по умолчанию: 15)
2. Используйте предмет на другом игроке
3. В появившемся интерфейсе укажите сумму для передачи
4. Нажмите кнопку "Перевести"

## UI эффект (для разработчиков)

Для работы плагина необходимо создать UI эффект с соответствующими элементами:

1. Текстовое поле: `forge.playerName_wallet` - отображает имя получателя
2. Поле ввода: `forge.inputAmount_wallet` - для ввода суммы
3. Кнопки:
   - `forge.close_wallet` - закрытие интерфейса
   - `forge.transfer_wallet` - выполнение перевода
   - `forge.transfer_wallet_{steamid}` - кнопки выбора игрока (если используется список)

## Логирование транзакций

Все транзакции логируются в файл стандартных логов сервера в следующем формате:

```
[WALLET] [YYYY-MM-DD HH:MM:SS] Имя_отправителя (SteamID) передал X опыта игроку Имя_получателя (SteamID)
```

## Устранение неполадок

### Не работает предмет-кошелек

- Убедитесь, что ID предмета в конфигурации соответствует реальному ID предмета
- Проверьте, что у игрока есть разрешение `forge.wallet` или `forge.wallet.use`

### Не отображается интерфейс

- Проверьте, что ID эффекта в конфигурации соответствует реальному ID эффекта в вашем наборе эффектов
- Убедитесь, что UI эффект содержит все необходимые элементы

### Ошибка: "У вас нет разрешения на использование кошелька"

- Добавьте игроку разрешение `forge.wallet` или `forge.wallet.use`

## Лицензия

Этот проект распространяется под лицензией MIT. См. файл [LICENSE](LICENSE) для получения дополнительной информации.

## Авторы

- **Forge Team** - Разработка и поддержка
